nt <- 24
pc <- 0.26
pu <- 0.245
data <- tibble(sbj=NULL,cond=NULL,acc=NULL)
for(s in seq(ns)){
data <- rbind(data,
data.frame(sbj=s,cond='create',acc=1.0*(runif(nt)<pc)))
data <- rbind(data,
data.frame(sbj=s,cond='update',acc=1.0*(runif(nt)<pu)))
}
data$sbj <- as.factor(data$sbj)
ggplot(data %>% group_by(sbj,cond) %>% summarise(acc=mean(acc)),
aes(x=cond,y=acc,colour=cond))+
geom_point(alpha=0.25,position=position_jitter(0.1))+
stat_summary(fun.data='mean_cl_boot',geom='errorbar',width=0.2)+
stat_summary(fun='mean',geom='point')+
coord_cartesian(ylim=c(0,1))
m <- brm(acc~cond+(1|cond|sbj),data=data,family=bernoulli)
m <- brm(acc~cond+(1|cond|sbj),data=data,family=binomial(link='probit'))
m <- brm(acc~cond+(1|cond|sbj),data=data,family=bernoulli(link='probit'))
describe_posterior(m,rope_ci=1)#rope_range=c(-0.1,0.1))
opts.g <-  glmerControl(optimizer="optimx", calc.derivs=F,
optCtrl=list(method="nlminb",starttests=F,kkt=F))
# simulate null effect
ns <- 100
nt <- 24
pc <- 0.25
pu <- 0.25
nsim <- 1000
simeffect <- tibble(sim=NULL,beta=NULL)
for(n in seq(nsim)){
data <- tibble(sbj=NULL,cond=NULL,acc=NULL)
for(s in seq(ns)){
data <- rbind(data,
data.frame(sbj=s,cond='create',acc=1.0*(runif(nt)<pc)))
data <- rbind(data,
data.frame(sbj=s,cond='update',acc=1.0*(runif(nt)<pu)))
}
data$sbj <- as.factor(data$sbj)
m <- glmer(acc~cond+(1+cond|sbj),data=data,
family=binomial(link='probit'),control=opts.g)
simeffect <- rbind(simeffect,
tibble(sim=n,beta=fixef(m)[2]))
}
install.packages('lme4')
install.packages("lme4")
install.packages("lme4")
d <- read_csv('~/OneDrive - University of Toronto/TMS/clusterzap/czap_data/alldata.txt')
library(tidyverse)
library(lme4)
d <- read_csv('~/OneDrive - University of Toronto/TMS/clusterzap/czap_data/alldata.txt')
ggplot(d,aes(x=run,y=correct,colour=hemi))+stat_summary()
ggplot(d,aes(x=run,y=correct,colour=factor(hemi)))+stat_summary()
m <- glmer(correct~run*hemi+(1|sbj),data=d,family=binomial)
car::Anova(m,type=3)
car:Anova(glmer(correct~hemi+(1|sbj),data=filter(d,run==4),family=binomial))
car::Anova(glmer(correct~hemi+(1|sbj),data=filter(d,run==4),family=binomial),type=3)
install.packages(c("boot", "foreign", "Matrix"))
library(tidyverse)
library(lme4)
library(easystats)
library(ggeffects)
library(emmeans)
library(car)
dl <- c(75,48,75,77,47)
vm <- c(75,72,71,81,75)
mean(dl)
mean(vm)
t.test(dl,vm)
?t.test
wilcox.test(dl,vm)
exit()
exit
setwd("~/Documents/GitHub/michaelmack/hip-sl")
# load data
files <- list.files('output/outputacts/tstacts_early_runs_10',
pattern='*.csv'
full.names=T)
# load data
files <- list.files('output/outputacts/tstacts_early_runs_10',
pattern='*.csv',
full.names=T)
files
files[1]
str_split(files[1],'_')
library(stringr)
library(tidyverse)
library(easystats)
str_split(files[1],'_')
# load data
files <- list.files('output/outputacts/tstacts_early_runs_10',
pattern='*.csv',
full.names=T)
# load data
files <- list.files('output/outputacts/tstacts_early_runs_10',
pattern='*.csv',
full.names=T)
# load data
files <- list.files('output/outputacts/tstacts_early_runs_10',
pattern='*.csv',
full.names=T)
# load data
files <- list.files('output/outputacts/tstacts_early_runs_10',
pattern='*.csv',
full.names=T)
df <- files %>%
map_dfr(read_csv)
df <- files %>%
map_dfr(read_csv(.x,show_col_types=F))
df <- files %>%
map_dfr(read_csv(show_col_types=F))
df <- files %>%
map_dfr(read_csv(.,show_col_types=F))
?map_dfr
df <- lapply(file,read_csv(.x,show_col_types=F))
df <- files %>%
map_dfr(read_csv)
df <- files %>%
map(read_csv) %>%
list_rbind()
df <- files %>%
map(\(x),read_csv(x,show_col_types=F)) %>%
df <- files %>%
map(\(x) read_csv(x,show_col_types=F)) %>%
list_rbind()
View(df)
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception'))
df$type
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B',
))
df$category
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
if(category=='A')~ECout_8/(ECout_8+ECout_9),
if(category=='B')~ECout_9/(ECout_8+ECout_9)))
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B'))
df$category
df <- df%>%
mutate(acc=case_when(
if(category=='A')~ECout_8/(ECout_8+ECout_9),
if(category=='B')~ECout_9/(ECout_8+ECout_9)))
df$category
df$category[1]
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
category=='A'~ECout_8/(ECout_8+ECout_9),
category=='B'~ECout_9/(ECout_8+ECout_9)))
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
category=='A'~Ecout_8/(Ecout_8+Ecout_9),
category=='B'~Ecout_9/(Ecout_8+Ecout_9)))
df$acc
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
geom_line()
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')
df$type <- factor(df$type,
levels=c('prototype','rulefollower','exception'))
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
df2 <- read_csv('tmp.txt')
files
system2('cat',args=files)
files
system2('cat',args=c(files,'>> tmp2.txt'),wait=F)
paste(files)
paste(c(files))
system2('rm tmp.csv && cat',args=c(files,'>> tmp.csv'),wait=F)
system2('rm tmp.csv; cat',args=c(files,'>> tmp.csv'),wait=F)
rm
?rm
file.create('tmp.csv')
?file.create
# load data
files <- list.files('output/outputacts/tstacts_early_runs_10',
pattern='*.csv',
full.names=T)
file.create('tmp.csv')
system2('cat',args=c(files,'>> tmp.csv'),wait=F)
df <- read_csv('tmp.csv',show_col_types=F))
df <- read_csv('tmp.csv',show_col_types=F)
file.create('tmp.csv')
system2('cat',args=c(files,'>> tmp.csv'),wait=F)
df <- read_csv('tmp.csv',show_col_types=F)
View(df)
df %>% filter(Run!='Run')
# load data
files <- list.files('output/outputacts/tstacts_early_runs_10',
pattern='*.csv',
full.names=T)
file.create('tmp.csv')
system2('cat',args=c(files,'>> tmp.csv'),wait=F)
df <- read_csv('tmp.csv',show_col_types=F)
df %>% filter(Run!='Run')
file.create('tmp.csv',showWarnings=F)
system2('cat',args=c(files,'>> tmp.csv'),wait=F)
df <- read_csv('tmp.csv',show_col_types=F)
df <- df %>% filter(Run!='Run')
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
category=='A'~Ecout_8/(Ecout_8+Ecout_9),
category=='B'~Ecout_9/(Ecout_8+Ecout_9)))
df$type <- factor(df$type,
levels=c('prototype','rulefollower','exception'))
df$TrialName
df$Ecout_0
files[2]
files[2:]
files[2,]
files[2:5]
files[2:-1]
files[2:len(files)]
length(files)
system2('cat',args=c(files[1],'>','tmp.csv'),wait=F)
system2('cat',args=c(files[1],'>','tmp.csv'),wait=F)
system2('cat',args=c(files[1],'>','tmp.csv'),wait=F)
system2('awk',args=c('FNR!=1',files[2:length(files)],'>>','tmp.csv'),wait=F)
df <- read_csv('tmp.csv',show_col_types=F)
df <- df %>% filter(Run!='Run')
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
system2('cat',args=c(files[1],'>','tmp/tmp.csv'),wait=F)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
# load data
files <- list.files('output/outputacts/tstacts_late_runs_100',
pattern='*.csv',
full.names=T)
system2('cat',args=c(files[1],'>','tmp/tmp.csv'),wait=F)
system2('awk',args=c('FNR!=1',files[2:length(files)],'>>','tmp/tmp.csv'),wait=F)
df <- read_csv('tmp/tmp.csv',show_col_types=F)
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
category=='A'~Ecout_8/(Ecout_8+Ecout_9),
category=='B'~Ecout_9/(Ecout_8+Ecout_9)))
df$type <- factor(df$type,
levels=c('prototype','rulefollower','exception'))
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
library(tidyverse)
library(easystats)
library(stringr)
# load data
files <- list.files('output/outputacts/tstacts_early_runs_100',
pattern='*.csv',
full.names=T)
system2('cat',args=c(files[1],'>','tmp/tmp.csv'),wait=F)
system2('awk',args=c('FNR!=1',files[2:length(files)],'>>','tmp/tmp.csv'),wait=F)
df <- read_csv('tmp/tmp.csv',show_col_types=F)
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
category=='A'~Ecout_8/(Ecout_8+Ecout_9),
category=='B'~Ecout_9/(Ecout_8+Ecout_9)))
df$type <- factor(df$type,
levels=c('prototype','rulefollower','exception'))
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R")
library(tidyverse)
library(easystats)
library(stringr)
# load data
files <- list.files('output/outputacts/tstacts_early_tsp_runs_2',
pattern='*.csv',
full.names=T)
system2('cat',args=c(files[1],'>','tmp/tmp.csv'),wait=F)
system2('awk',args=c('FNR!=1',files[2:length(files)],'>>','tmp/tmp.csv'),wait=F)
df <- read_csv('tmp/tmp.csv',show_col_types=F)
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
category=='A'~Ecout_8/(Ecout_8+Ecout_9),
category=='B'~Ecout_9/(Ecout_8+Ecout_9)))
df$type <- factor(df$type,
levels=c('prototype','rulefollower','exception'))
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
library(tidyverse)
library(easystats)
library(stringr)
# load data
files <- list.files('output/outputacts/tstacts_early_tsp_runs_2',
pattern='*.csv',
full.names=T)
system2('cat',args=c(files[1],'>','tmp/tmp.csv'),wait=F)
system2('awk',args=c('FNR!=1',files[2:length(files)],'>>','tmp/tmp.csv'),wait=F)
df <- read_csv('tmp/tmp.csv',show_col_types=F)
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
category=='A'~Ecout_8/(Ecout_8+Ecout_9),
category=='B'~Ecout_9/(Ecout_8+Ecout_9)))
df$type <- factor(df$type,
levels=c('prototype','rulefollower','exception'))
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
df
# load data
files <- list.files('output/outputacts/tstacts_early_tsp_runs_2',
pattern='*.csv',
full.names=T)
system2('cat',args=c(files[1],'>','tmp/tmp.csv'),wait=F)
system2('awk',args=c('FNR!=1',files[2:length(files)],'>>','tmp/tmp.csv'),wait=F)
df <- read_csv('tmp/tmp.csv',show_col_types=F)
df <- df %>%
mutate(type=case_when(
str_detect(TrialName,'P')~'prototype',
str_detect(TrialName,'R')~'rulefollower',
str_detect(TrialName,'E')~'exception')) %>%
mutate(category=case_when(
str_detect(TrialName,'A')~'A',
str_detect(TrialName,'B')~'B')) %>%
mutate(acc=case_when(
category=='A'~Ecout_8/(Ecout_8+Ecout_9),
category=='B'~Ecout_9/(Ecout_8+Ecout_9)))
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R")
df
df$epoch
df$Epoch
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R")
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R")
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R")
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))
# load data
el <- 'early'
lesion <- 'tsp'
runs <- '100'
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))+
labs(title=paste('Lesion:',lesion,'| Environment:',el),
y='Accuracy',
x='Epoch')+
theme_minimal()
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))+
labs(title=paste('lesion:',lesion,'| curriculum:',el),
y='Accuracy',
x='Epoch')+
theme_minimal()
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
seq(2,25)
permute(seq(2,25))
perm(seq(2,25))
sample(seq(2,25))
?sample
sample(seq(2,25))
sample(seq(2,25))
sample(seq(2,25))
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
coord_cartesian(ylim=c(0,1))+
labs(title=paste('lesion:',lesion,'| curriculum:',el),
y='Accuracy',
x='Epoch')+
theme_minimal()
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
lesion <- 'intact'
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
facet_wrap(~category)+
coord_cartesian(ylim=c(0,1))+
labs(title=paste('lesion:',lesion,'| curriculum:',el),
y='Accuracy',
x='Epoch')+
theme_minimal()
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
df
df$acc
View(df)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
lesion <- 'intact'
source("~/Documents/GitHub/michaelmack/hip-sl/analyze_outputs.R", echo = TRUE)
ggplot(df,aes(x=Epoch,y=acc,colour=type))+
stat_summary(fun.data=mean_se,geom='pointrange')+
facet_wrap(~category)+
coord_cartesian(ylim=c(0,1))+
labs(title=paste('lesion:',lesion,'| curriculum:',el),
y='Accuracy',
x='Epoch')+
theme_minimal()
